openapi: 3.0.1
info:
  title: Heroku Data API V1
  version: v1
  description: 'The Heroku Data API V1 provides programmatic access to manage and
    interact with Heroku PostgreSQL databases and object stores.

    It enables operations like creating and managing instance pools, scaling databases,
    retrieving quotas, and handling credentials for PostgreSQL databases.

    The API is designed for developers and administrators to automate database management
    tasks efficiently.'
tags:
- name: PG2.0
  description: Operations for managing Next-Gen PostgreSQL databases (pre-GA, expect
    breaking changes).
- name: PG2.0 (To Implement)
  description: Planned operations for Next-Gen PostgreSQL databases that are not yet
    available.
- name: PG2.0 (Deprecated)
  description: Deprecated operations for Next-Gen PostgreSQL databases, scheduled
    for removal in future updates.
paths:
  /data/postgres/v1/levels/{tier}:
    get:
      tags:
      - PG2.0
      summary: Retrieve Available PostgreSQL Performance Levels
      description: "Fetches a list of available performance levels for PostgreSQL\
        \ databases based on the specified tier. \nEach level represents a configuration\
        \ with a specific memory allocation, such as \"32G-Performance\" for 32GB\
        \ of memory."
      parameters:
      - name: tier
        in: path
        required: true
        schema:
          type: string
          enum:
          - performance
        description: The tier of PostgreSQL database, currently supporting only the
          "performance" tier.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved the list of available PostgreSQL performance
            levels.
          content:
            application/json:
              schema:
                type: object
                properties:
                  levels:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: The name of the performance level, indicating
                            memory allocation (e.g., "32G-Performance" for 32GB).
                          example: 32G-Performance
                      required:
                      - name
                required:
                - levels
              example:
                levels:
                - name: 4G-Performance
                - name: 8G-Performance
                - name: 16G-Performance
                - name: 32G-Performance
                - name: 64G-Performance
                - name: 128G-Performance
                - name: 256G-Performance
                - name: 384G-Performance
                - name: 512G-Performance
                - name: 768G-Performance
                - name: 1024G-Performance
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
  /data/postgres/v1/{addon}/pools:
    post:
      tags:
      - PG2.0
      summary: Create a New Instance Pool
      description: "Creates a new instance pool for a Next-Gen PostgreSQL addon. An\
        \ instance pool is a group of compute instances \nthat share the same configuration\
        \ and connection endpoints, used to manage database workloads."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - name
              - level
              - count
              properties:
                name:
                  type: string
                  description: The name of the instance pool, used to identify it
                    within the addon.
                  example: analytics
                level:
                  type: string
                  description: The performance level for the pool, such as "32G-Performance"
                    for 32GB of memory.
                  example: 32G-Performance
                count:
                  type: integer
                  description: The number of compute instances in the pool.
                  example: 1
      responses:
        '201':
          description: Instance pool created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComputePool'
        '404':
          description: The specified addon was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: not_found
                message: Addon not found
        '409':
          description: An instance pool with the same name already exists.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: conflict
                message: An instance pool with the same name already exists.
  /data/postgres/v1/{addon}/pools/{uuid}:
    get:
      tags:
      - PG2.0
      summary: Retrieve an Instance Pool
      description: Fetches details about a specific instance pool within a Next-Gen
        PostgreSQL addon, including its configuration and status.
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: uuid
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: The unique identifier of the instance pool.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Instance pool details retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComputePool'
        '404':
          description: The specified instance pool was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: not_found
                message: An instance pool with this name does not exist.
    patch:
      tags:
      - PG2.0
      summary: Update an Instance Pool
      description: Updates the configuration of an existing instance pool, such as
        its name, performance level, or number of instances.
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: uuid
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: The unique identifier of the instance pool.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: The new name for the instance pool.
                  example: analytics
                level:
                  type: string
                  description: The new performance level for the pool, e.g., "32G-Performance".
                  example: 32G-Performance
                count:
                  type: integer
                  description: The new number of compute instances in the pool.
                  example: 1
      responses:
        '200':
          description: Instance pool updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComputePool'
        '404':
          description: The specified instance pool was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: not_found
                message: An instance pool with this name does not exist.
    delete:
      tags:
      - PG2.0
      summary: Delete an Instance Pool
      description: Removes an instance pool from a Next-Gen PostgreSQL addon, deleting
        all associated compute instances.
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: uuid
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: The unique identifier of the instance pool.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '204':
          description: Instance pool deleted successfully.
        '404':
          description: The specified instance pool was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: not_found
                message: An instance pool with this name does not exist.
  /data/postgres/v1/{addon}/scale:
    put:
      deprecated: true
      tags:
      - PG2.0 (Deprecated)
      summary: Scale a PostgreSQL Database Pool
      description: "Scales a PostgreSQL database pool by adjusting the number of followers\
        \ or performance level. \nTo create a new pool, provide a new name with followers\
        \ and level. To remove a pool, set followers to 0. \nThis endpoint is deprecated\
        \ and will be removed in future updates."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - followers
              - level
              properties:
                followers:
                  type: integer
                  description: The number of follower instances (applicable to follower
                    pools only).
                level:
                  type: string
                  description: The performance level for the pool, e.g., "32G-Performance".
                  example: 32G-Performance
                pool:
                  type: string
                  description: The target pool to scale, defaults to "writer".
                  default: writer
                high_availability:
                  type: boolean
                  description: Enables or disables high availability for the writer
                    pool.
                confirmed:
                  type: boolean
                  description: Confirms the scaling operation to proceed.
      responses:
        '200':
          description: Scaling operation completed successfully.
          content:
            application/json:
              schema:
                type: object
                required:
                - changes
                properties:
                  changes:
                    type: array
                    items:
                      type: object
                      required:
                      - name
                      - previous
                      - current
                      - pool
                      properties:
                        name:
                          type: string
                          description: The name of the changed attribute (e.g., level,
                            followers).
                        previous:
                          oneOf:
                          - type: string
                          - type: number
                          - type: boolean
                          nullable: true
                          description: The previous value of the attribute.
                        current:
                          oneOf:
                          - type: string
                          - type: number
                          - type: boolean
                          nullable: true
                          description: The new value of the attribute.
                        pool:
                          type: string
                          description: The pool affected by the change.
              example:
                changes:
                - name: level
                  previous: 4G-Performance
                  current: 8G-Performance
                  pool: default
                - name: followers
                  previous: 1
                  current: 2
                  pool: default
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
  /data/postgres/v1/{addon}/settings:
    get:
      tags:
      - PG2.0
      summary: Retrieve PostgreSQL Configuration Settings
      description: Fetches the current configuration settings for a PostgreSQL database,
        such as logging and performance tuning parameters.
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved the current PostgreSQL settings.
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  oneOf:
                  - type: string
                  - type: number
                  nullable: true
                  description: A key-value pair of PostgreSQL configuration settings.
              example:
                log_connections: '1'
                log_lock_waits: '1'
                log_min_duration_statement: '500'
                log_min_error_statement: info
                log_statement: ddl
                track_functions: pl
                auto_explain.log_analyze: true
                auto_explain.log_buffers: true
                auto_explain.log_format: text
                auto_explain.log_min_duration: 0
                auto_explain.log_nested_statements: true
                auto_explain.log_triggers: true
                auto_explain.log_verbose: true
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified addon was not found.
    put:
      tags:
      - PG2.0
      summary: Update PostgreSQL Configuration Settings
      description: Updates the configuration settings for a PostgreSQL database, such
        as logging thresholds or performance parameters.
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                settings:
                  type: string
                  description: A comma-separated list of setting name-value pairs
                    to update.
                  example: log_min_duration_statement:500,idle_in_transaction_session_timeout:864000
              required:
              - settings
      responses:
        '200':
          description: Settings updated successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  changes:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: The name of the setting that was updated.
                        previous:
                          oneOf:
                          - type: string
                          - type: number
                          - type: boolean
                          nullable: true
                          description: The previous value of the setting.
                        current:
                          oneOf:
                          - type: string
                          - type: number
                          - type: boolean
                          nullable: true
                          description: The new value of the setting.
                      required:
                      - name
                      - previous
                      - current
                example:
                  changes:
                  - name: log_min_duration_statement
                    previous: '550'
                    current: '500'
                  - name: idle_in_transaction_session_timeout
                    previous: '80000'
                    current: '864000'
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified addon was not found.
  /data/postgres/v1/{addon}/info:
    get:
      tags:
      - PG2.0
      summary: Retrieve PostgreSQL Database Information
      description: 'Fetches detailed information about a Performance-Tier PostgreSQL
        database, including its status, version, and associated pools.

        This endpoint replaces the deprecated `/data/postgres/v1/{addon}` endpoint
        and is exclusive to Performance-Tier databases.'
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
          format: uuid
          example: 01234567-89ab-cdef-0123-456789abcdef
        description: The unique identifier of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved PostgreSQL database information.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostgresTenant'
        '404':
          description: The specified database was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                id: not_found
                message: Database not found
  /data/postgres/v1/{addon}:
    get:
      deprecated: true
      tags:
      - PG2.0 (Deprecated)
      summary: Retrieve PostgreSQL Addon Information
      description: "Fetches detailed information about a PostgreSQL addon, including\
        \ its pools, status, and resource usage. \nThis endpoint is deprecated and\
        \ will be replaced by `/data/postgres/v1/{addon}/info` in the future."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved PostgreSQL addon information.
          content:
            application/json:
              schema:
                type: object
                required:
                - addon_id
                - addon_name
                - app_name
                - version
                - attachment_name
                - highly_available
                - created_at
                - tier
                - wait
                - status
                - pools
                - data
                - tables
                properties:
                  addon_id:
                    type: string
                    description: The unique identifier of the addon.
                  addon_name:
                    type: string
                    description: The name of the addon.
                  app_name:
                    type: string
                    description: The name of the associated Heroku app.
                  version:
                    type: string
                    description: The PostgreSQL version.
                  attachment_name:
                    type: string
                    description: The name of the database attachment.
                  highly_available:
                    type: boolean
                    description: Indicates if high availability is enabled.
                  created_at:
                    type: string
                    format: date-time
                    description: The timestamp when the addon was created.
                  tier:
                    type: string
                    enum:
                    - performance
                    description: The tier of the PostgreSQL database.
                  wait:
                    type: boolean
                    description: Indicates if the addon is in a waiting state.
                  status:
                    type: string
                    description: The current status of the addon (e.g., Available).
                  pools:
                    type: array
                    items:
                      type: object
                      required:
                      - name
                      - level
                      - count
                      - status
                      - attachment_name
                      - instances
                      properties:
                        name:
                          type: string
                          description: The name of the pool.
                        level:
                          type: string
                          description: The performance level of the pool (e.g., 4G-Performance).
                        count:
                          type: integer
                          description: The number of instances in the pool.
                        status:
                          type: string
                          description: The current status of the pool.
                        attachment_name:
                          type: string
                          description: The name of the pool's attachment.
                        instances:
                          type: array
                          items:
                            type: object
                            required:
                            - id
                            - name
                            - status
                            - role
                            - updated_at
                            properties:
                              id:
                                type: string
                                description: The unique identifier of the instance.
                              name:
                                type: string
                                description: The name of the instance.
                              status:
                                type: string
                                description: The current status of the instance.
                              role:
                                type: string
                                description: The role of the instance (e.g., writer,
                                  reader).
                              updated_at:
                                type: string
                                format: date-time
                                description: The timestamp when the instance was last
                                  updated.
                  data:
                    type: object
                    required:
                    - used_message
                    - compliance_message
                    properties:
                      used_message:
                        type: string
                        description: A message indicating data usage.
                      compliance_message:
                        type: string
                        description: A message indicating compliance status.
                  tables:
                    type: object
                    required:
                    - used_message
                    - compliance_message
                    properties:
                      used_message:
                        type: string
                        description: A message indicating table usage.
                      compliance_message:
                        type: string
                        description: A message indicating table compliance status.
              example:
                addon_id: 01234567-89ab-cdef-0123-456789abcdef
                addon_name: test-addon
                app_name: test-app
                version: '1'
                attachment_name: DATABASE
                highly_available: true
                created_at: '2024-10-31T01:30:00.000-05:00'
                tier: performance
                wait: false
                status: Available
                pools:
                - attachment_name: DATABASE
                  count: 1
                  instances:
                  - id: '1'
                    name: writer.1
                    role: writer
                    status: Available
                    updated_at: '2024-09-31T01:30:00.000-05:00'
                  - id: '2'
                    name: standby.1
                    role: standby_writer
                    status: Available
                    updated_at: '2024-09-31T01:30:00.000-05:00'
                  level: 4G-Performance
                  name: writer
                  status: Available
                - attachment_name: READERS
                  count: 2
                  instances:
                  - id: '1'
                    name: readers.1
                    role: reader
                    status: Available
                    updated_at: '2024-09-31T01:30:00.000-05:00'
                  - id: '2'
                    name: readers.2
                    role: reader
                    status: Available
                    updated_at: '2024-09-31T01:30:00.000-05:00'
                  level: 4G-Performance
                  name: readers
                  status: Available
                data:
                  used_message: 1/100MB
                  compliance_message: In compliance
                tables:
                  used_message: 1/100MB
                  compliance_message: In compliance
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified addon was not found.
  /data/postgres/v1/{addon}/quotas:
    get:
      tags:
      - PG2.0
      summary: Retrieve PostgreSQL Quotas
      description: Fetches a list of all quotas for a PostgreSQL database, including
        storage and other resource limits.
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved the list of database quotas.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Quotas'
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
  /data/postgres/v1/{addon}/quotas/storage:
    get:
      tags:
      - PG2.0
      summary: Retrieve PostgreSQL Storage Quotas
      description: Fetches the storage quota settings for a PostgreSQL database, including
        current usage and thresholds.
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved the storage quota settings.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StorageQuota'
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
    patch:
      tags:
      - PG2.0
      summary: Update PostgreSQL Storage Quota
      description: "Updates the storage quota settings for a PostgreSQL database,\
        \ such as warning and critical thresholds or enforcement actions. \nOnly provided\
        \ fields are updated, and null values unset specific settings."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                warning_gb:
                  type: integer
                  nullable: true
                  description: The storage usage threshold (in GB) at which a warning
                    is triggered. Set to null to disable.
                  example: 50
                critical_gb:
                  type: integer
                  nullable: true
                  description: The storage usage threshold (in GB) at which critical
                    actions are triggered. Set to null to disable.
                  example: 100
                enforcement_action:
                  type: string
                  enum:
                  - restrict
                  - notify
                  - none
                  description: 'The action to take when the storage quota is exceeded:

                    - **restrict**: Limits database operations (revokes CREATE/INSERT,
                    limits connections to 1).

                    - **notify**: Sends a notification without restricting operations.

                    - **none**: Takes no action, potentially incurring additional
                    costs.

                    '
                  example: restrict
      responses:
        '200':
          description: Storage quota updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StorageQuota'
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
  /data/postgres/v1/{addon}/diagnose:
    get:
      tags:
      - PG2.0 (To Implement)
      summary: Retrieve Database Diagnostic Information
      description: "Fetches comprehensive diagnostic information about a PostgreSQL\
        \ database, including connection counts, long-running queries, \ntransactions,\
        \ index usage, bloat, hit rates, blocking queries, and more. This endpoint\
        \ is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved diagnostic information.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostgresDiagnosticReport'
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
  /data/postgres/v1/{addon}/expensive-queries:
    get:
      tags:
      - PG2.0 (To Implement)
      summary: Retrieve Expensive Queries
      description: "Fetches a list of the most resource-intensive queries executed\
        \ on a PostgreSQL database over the past week, \nsorted by total execution\
        \ time. Includes hourly observation data. Query text is truncated to 4,000\
        \ characters. \nThis endpoint is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 10
          minimum: 1
          maximum: 25
        description: The number of queries to return, between 1 and 25.
      responses:
        '200':
          description: Successfully retrieved the list of expensive queries.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExpensiveQueriesResponse'
              example:
                queries:
                - query_id: '01234'
                  text: SELECT * FROM users
                  observations:
                  - time: '2025-02-13T15:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
                  - time: '2025-02-13T16:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
                - query_id: '56789'
                  text: SELECT * FROM accounts
                  observations:
                  - time: '2025-02-13T15:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
                  - time: '2025-02-13T16:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '403':
          description: Forbidden due to insufficient permissions.
        '404':
          description: The specified resource was not found.
  /data/postgres/v1/{addon}/reset:
    post:
      tags:
      - PG2.0 (To Implement)
      summary: Reset the Database
      description: "Deletes all data in a PostgreSQL database and optionally installs\
        \ specified extensions afterward. \nThis operation is synchronous and completes\
        \ immediately. This endpoint is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                extensions:
                  type: array
                  items:
                    type: string
                  description: A list of PostgreSQL extension names to install after
                    the reset.
      responses:
        '200':
          description: Database reset successfully.
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '403':
          description: Forbidden due to insufficient permissions.
        '404':
          description: The specified resource was not found.
  /object-stores/{uuid}:
    get:
      summary: Retrieve an Object Store
      description: Fetches details about a specific object store, including its status,
        region, and plan.
      parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      - name: uuid
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier of the object store.
      responses:
        '200':
          description: Successfully retrieved object store details.
          content:
            application/json:
              examples:
                object_store:
                  value:
                    addon_id: 81a1cd0c-a986-4780-b402-7a95c5ecaf30
                    addon_name: object-store-crystalline-32342
                    plan: dev
                    region: virginia
                    status: Available
                    created_at: '2024-06-27T19:04:58.210+00:00'
        '401':
          description: Unauthorized due to missing or invalid authentication token.
  /object-stores/{uuid}/credential/rotate:
    post:
      summary: Rotate Object Store Credentials
      description: Rotates the credentials for an object store, generating new access
        keys and invalidating the old ones.
      parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      - name: uuid
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier of the object store.
      responses:
        '200':
          description: Credentials rotated successfully.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
  /addons/heroku-postgresql/heroku/resources:
    post:
      summary: Create a New Heroku PostgreSQL Addon
      description: Provisions a new Heroku PostgreSQL addon for use with a Heroku
        app.
      parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '202':
          description: PostgreSQL addon creation initiated successfully.
        '400':
          description: Bad request due to missing or invalid parameters.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAddon'
  /addons/heroku-postgresql/heroku/resources/{id}:
    put:
      summary: Update a Heroku PostgreSQL Addon
      description: Modifies the plan or configuration of an existing Heroku PostgreSQL
        addon.
      parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      - name: id
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier of the PostgreSQL addon.
      responses:
        '202':
          description: PostgreSQL addon update initiated successfully.
        '400':
          description: Bad request due to missing or invalid parameters.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAddon'
    delete:
      summary: Delete a Heroku PostgreSQL Addon
      description: Deprovisions an existing Heroku PostgreSQL addon, removing it from
        the associated app.
      parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      - name: id
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier of the PostgreSQL addon.
      responses:
        '204':
          description: PostgreSQL addon deleted successfully.
        '400':
          description: Bad request due to missing or invalid parameters.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
  /addons/heroku-postgresql/heroku/resources/{id}/namespaces:
    post:
      summary: Create a New Attachment for a PostgreSQL Addon
      description: Creates a new attachment to associate a Heroku PostgreSQL addon
        with an app or specific configuration.
      parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      - name: id
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier of the PostgreSQL addon.
      responses:
        '200':
          description: Attachment created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttachmentResponse'
        '400':
          description: Bad request due to missing or invalid parameters.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database, credential, or instance pool was not
            found.
        '422':
          description: Unprocessable entity due to invalid request data.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Attachment'
  /client/v11/database/{name}/expensive-queries:
    get:
      summary: Retrieve Expensive Queries (legacy Endpoint)
      description: "Fetches a list of resource-intensive queries for a PostgreSQL\
        \ database over the past week, sorted by total execution time. \nIncludes\
        \ hourly observation data. Query text is truncated to 4,000 characters."
      parameters:
      - name: name
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 10
          minimum: 1
          maximum: 25
        description: The number of queries to return, between 1 and 25.
      responses:
        '200':
          description: Successfully retrieved the list of expensive queries.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExpensiveQueriesResponse'
              example:
                queries:
                - query_id: '01234'
                  text: SELECT * FROM users
                  observations:
                  - time: '2025-02-13T15:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
                  - time: '2025-02-13T16:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
                - query_id: '56789'
                  text: SELECT * FROM accounts
                  observations:
                  - time: '2025-02-13T15:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
                  - time: '2025-02-13T16:00:00.000Z'
                    time_spent: 1
                    calls: 10
                    read_time: 50
                    write_time: 70
        '400':
          description: Bad request due to invalid parameters or malformed request.
        '403':
          description: Forbidden due to insufficient permissions.
        '404':
          description: The specified resource was not found.
  /data/postgres/v1/{addon}/rotate_credentials:
    post:
      tags:
      - PG2.0 (To Implement)
      summary: Rotate All Database Credentials
      description: "Rotates all credentials for a PostgreSQL database, invalidating\
        \ existing passwords and generating new ones. \nThis endpoint is planned but\
        \ not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                forced:
                  type: boolean
                  description: If true, immediately terminates all connections before
                    rotating credentials.
      responses:
        '200':
          description: All credentials rotated successfully.
          content:
            application/json:
              schema:
                type: object
                required:
                - message
                properties:
                  message:
                    type: string
                    description: A confirmation message indicating the rotation was
                      successful.
              example:
                message: All credentials have been rotated within {database_name}.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
        '400':
          description: Bad request due to invalid parameters or malformed request.
  /data/postgres/v1/{addon}/credentials:
    get:
      tags:
      - PG2.0 (To Implement)
      summary: List All Database Credentials
      description: "Fetches a list of all credentials associated with a PostgreSQL\
        \ database, including their status and connection details. \nThis endpoint\
        \ is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved the list of database credentials.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CredentialsResponse'
              example:
              - uuid: 01234567-89ab-cdef-0123-456789abcdef
                name: default
                state: active
                database: d1234567890
                host: example.cluster-1234567890.region.rds.amazonaws.com
                port: 5432
                roles: []
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
    post:
      tags:
      - PG2.0 (To Implement)
      summary: Create a New Database Credential
      description: "Creates a new credential for a PostgreSQL database, allowing access\
        \ with specified permissions. \nThis endpoint is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: The name of the new credential.
              required:
              - name
      responses:
        '200':
          description: Credential created successfully.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified database was not found.
        '400':
          description: Bad request due to invalid parameters or malformed request.
  /data/postgres/v1/{addon}/credentials/{cred_name}:
    get:
      tags:
      - PG2.0 (To Implement)
      summary: Retrieve a Specific Database Credential
      description: "Fetches details about a specific credential for a PostgreSQL database,\
        \ including its connection details and status. \nThis endpoint is planned\
        \ but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: cred_name
        in: path
        required: true
        schema:
          type: string
        description: The name of the credential to retrieve.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Successfully retrieved credential details.
          content:
            application/json:
              schema:
                type: object
                required:
                - uuid
                - name
                - state
                - database
                - host
                - port
                - roles
                properties:
                  uuid:
                    type: string
                    format: uuid
                    description: The unique identifier of the credential.
                  name:
                    type: string
                    description: The name of the credential.
                  state:
                    type: string
                    enum:
                    - active
                    - inactive
                    description: The current state of the credential (active or inactive).
                  database:
                    type: string
                    description: The name of the database associated with the credential.
                  host:
                    type: string
                    description: The hostname for connecting to the database.
                  port:
                    type: integer
                    description: The port number for connecting to the database.
                  roles:
                    type: array
                    items:
                      type: object
                      required:
                      - user
                      - password
                      - state
                      properties:
                        user:
                          type: string
                          description: The database username for the credential.
                        password:
                          type: string
                          description: The password for the database user.
                        state:
                          type: string
                          enum:
                          - active
                          - inactive
                          description: The state of the role (active or inactive).
              example:
                uuid: 01234567-89ab-cdef-0123-456789abcdef
                name: credential-name
                state: active
                database: database-name
                host: cluster-name.region.rds.amazonaws.com
                port: 5432
                roles:
                - user: credential-name
                  password: password123
                  state: active
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified credential was not found.
    delete:
      tags:
      - PG2.0 (To Implement)
      summary: Delete a Database Credential
      description: "Deletes a specific credential from a PostgreSQL database, removing\
        \ its access. \nThis endpoint is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: cred_name
        in: path
        required: true
        schema:
          type: string
        description: The name of the credential to delete.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '200':
          description: Credential deleted successfully.
          content:
            application/json:
              schema:
                type: object
                required:
                - message
                properties:
                  message:
                    type: string
                    description: A confirmation message indicating the credential
                      was deleted.
              example:
                message: The credential {credential_name} has been destroyed within
                  {database_name} and detached from all apps.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified credential was not found.
  /data/postgres/v1/{addon}/credentials/{cred_name}/rotate:
    post:
      tags:
      - PG2.0 (To Implement)
      summary: Rotate a Specific Database Credential
      description: "Rotates a specific credential for a PostgreSQL database, invalidating\
        \ the current password and generating a new one. \nThis endpoint is planned\
        \ but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: cred_name
        in: path
        required: true
        schema:
          type: string
        description: The name of the credential to rotate.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                forced:
                  type: boolean
                  description: If true, immediately terminates all connections to
                    the credential before rotation.
      responses:
        '200':
          description: Credential rotated successfully.
          content:
            application/json:
              schema:
                type: object
                required:
                - message
                properties:
                  message:
                    type: string
                    description: A confirmation message indicating the credential
                      was rotated.
              example:
                message: The credential {credential_name} has been rotated within
                  {database_name}.
        '401':
          description: Unauthorized due to missing or invalid authentication token.
        '404':
          description: The specified credential was not found.
        '400':
          description: Bad request due to invalid parameters or malformed request.
  /data/postgres/v1/{addon}/attach:
    put:
      tags:
      - PG2.0 (To Implement)
      summary: Attach a PostgreSQL Addon (placeholder)
      description: "A placeholder endpoint for attaching a PostgreSQL addon to an\
        \ app or resource. \nDetails are still being defined for general availability.\
        \ This endpoint is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '401':
          description: Unauthorized due to missing or invalid authentication token.
  /data/postgres/v1/{addon}/capabilities:
    get:
      tags:
      - PG2.0 (To Implement)
      summary: Retrieve Database Capabilities (placeholder)
      description: "A placeholder endpoint to fetch the allowed actions or capabilities\
        \ for a PostgreSQL database. \nIntended for use by dashboards to determine\
        \ available operations. This endpoint is planned but not yet implemented."
      parameters:
      - name: addon
        in: path
        required: true
        schema:
          type: string
        description: The unique identifier or name of the PostgreSQL addon.
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
        description: The API token required to authenticate the request.
      responses:
        '401':
          description: Unauthorized due to missing or invalid authentication token.
servers:
- url: https://{defaultHost}
  variables:
    defaultHost:
      default: www.example.com
      description: The default hostname for the API server.
components:
  schemas:
    Error:
      type: object
      properties:
        id:
          type: string
          description: A unique identifier for the error type (e.g., rate_limit, not_found).
          example: rate_limit
        message:
          type: string
          description: A human-readable description of the error.
          example: Your account reached the API limit. Please wait a few minutes before
            making new requests.
        url:
          type: string
          description: A URL to documentation or additional information about the
            error.
          example: https://devcenter.heroku.com/articles/platform-api-reference#rate-limits
      required:
      - id
      - message
      description: Represents an error response with details about what went wrong.
    App:
      description: Details about a Heroku app associated with a database cluster.
      type: object
      required:
      - uuid
      - name
      properties:
        uuid:
          type: string
          format: uuid
          description: The unique identifier of the Heroku app.
          example: 01234567-89ab-cdef-0123-456789abcdef
        name:
          type: string
          description: The name of the Heroku app.
          example: example
    Addon:
      description: Details about a Heroku addon for a PostgreSQL database cluster.
      type: object
      required:
      - uuid
      - name
      properties:
        uuid:
          type: string
          format: uuid
          description: The unique identifier of the addon.
          example: 01234567-89ab-cdef-0123-456789abcdef
        name:
          type: string
          description: The name of the addon, used to identify it within Heroku.
          example: acme-inc-primary-database
    PostgresTenant:
      description: Represents a Heroku PostgreSQL Performance-Tier database, including
        its app, addon, and resource details.
      type: object
      required:
      - app
      - addon
      - version
      - tier
      - status
      - created_at
      - quotas
      - pools
      properties:
        app:
          $ref: '#/components/schemas/App'
          description: The associated Heroku app for the database.
        addon:
          $ref: '#/components/schemas/Addon'
          description: The associated Heroku addon for the database.
        version:
          type: string
          description: The PostgreSQL version used by the database.
          example: '17.3'
        tier:
          type: string
          enum:
          - performance
          description: The tier of the database, currently only "performance" is supported.
        status:
          type: string
          enum:
          - provisioning
          - available
          - modifying
          - unavailable
          description: The current operational status of the database.
          example: available
        created_at:
          type: string
          format: date-time
          description: The timestamp when the database was created.
          example: '2024-09-31T01:30:00.000-05:00'
        quotas:
          type: array
          items:
            oneOf:
            - $ref: '#/components/schemas/StorageQuota'
          description: A list of quotas applied to the database, such as storage limits.
        plan_limits:
          type: array
          items:
            oneOf:
            - $ref: '#/components/schemas/TableLimit'
          description: Limits on the database plan, such as table or connection limits.
          example:
          - name: table-limit
            current: 100
            limit: 4000
          - name: connection-limit
            current: 100
            limit: 500
        pools:
          type: array
          items:
            $ref: '#/components/schemas/ComputePool'
          description: A list of compute pools associated with the database.
    ComputeInstance:
      description: A single compute instance within a database cluster, responsible
        for handling database operations.
      type: object
      properties:
        name:
          type: string
          description: The name of the compute instance.
          example: writer.1
        level:
          type: string
          description: The performance level of the instance, e.g., "16G-Performance".
          example: 16G-Performance
        role:
          type: string
          description: The role of the instance, such as "writer" or "reader".
          example: writer
        status:
          type: string
          description: The current status of the instance, e.g., "available".
          example: available
        updated_at:
          type: string
          format: date-time
          description: The timestamp when the instance was last updated.
          example: '2024-09-31T01:30:00.000-05:00'
    ConnectionEndpoint:
      description: Details about how to connect to a database pool, including host
        and port information.
      type: object
      required:
      - host
      - port
      - status
      properties:
        host:
          type: string
          description: The hostname for connecting to the database pool.
          example: c1n66rbai40pl3.cluster-czrs8kj4isg7.us-east-1.rds.amazonaws.com
        port:
          type: integer
          description: The port number for connecting to the database pool.
          example: 5432
        status:
          type: string
          enum:
          - available
          - modifying
          - degraded
          - deprovisioning
          description: The current status of the connection endpoint.
          example: modifying
    ComputePool:
      description: A group of compute instances within a database cluster that share
        the same configuration and connection endpoints.
      type: object
      properties:
        uuid:
          type: string
          format: uuid
          description: The unique identifier of the compute pool.
          example: 01234567-89ab-cdef-0123-456789abcdef
        name:
          type: string
          description: The name of the compute pool.
          example: analytics
        expected_level:
          type: string
          description: The desired performance level for the pool, e.g., "32G-Performance".
          example: 32G-Performance
        expected_count:
          type: integer
          description: The desired number of compute instances in the pool.
          example: 1
        status:
          type: string
          enum:
          - available
          - modifying
          description: The current status of the compute pool.
          example: modifying
        endpoints:
          type: array
          items:
            $ref: '#/components/schemas/ConnectionEndpoint'
          description: A list of connection endpoints for the compute pool.
        compute_instances:
          type: array
          items:
            $ref: '#/components/schemas/ComputeInstance'
          description: A list of compute instances in the pool.
      required:
      - name
      - expected_level
      - expected_count
      - compute_instances
    PostgresDiagnostic:
      type: object
      required:
      - name
      - summary
      - status
      - results
      properties:
        name:
          type: string
          description: The name of the diagnostic check, e.g., "connection_count".
        summary:
          type: string
          description: A human-readable summary of the diagnostic check.
        status:
          type: string
          enum:
          - skipped
          - green
          - yellow
          - red
          description: The status of the diagnostic check, indicating its health (green
            = healthy, yellow = warning, red = critical).
          example: green
        results:
          type: array
          items:
            type: object
            additionalProperties: true
            description: Detailed results specific to the diagnostic check.
      example:
        name: connection_count
        summary: Connection Count
        status: green
        results:
        - count: 100
      description: Represents a single diagnostic check for a PostgreSQL database,
        such as connection counts or query performance.
    PostgresDiagnosticReport:
      type: object
      required:
      - created_at
      - items
      properties:
        created_at:
          type: string
          format: date-time
          description: The timestamp when the diagnostic report was generated.
        items:
          type: array
          items:
            $ref: '#/components/schemas/PostgresDiagnostic'
          description: A list of diagnostic checks included in the report.
      example:
        created_at: '2024-09-31T01:30:00.000-05:00'
        items:
        - name: connection_count
          summary: Connection Count
          status: green
          results:
          - count: 100
        - name: long_queries
          summary: Long Queries
          status: green
          results:
          - pid: 12345
            duration: 100
            query: SELECT * FROM public.jobs
          - pid: 12346
            duration: 100
            query: SELECT * FROM public.logs
        - name: long_transactions
          summary: Long Transactions
          status: green
          results:
          - pid: 12345
            duration: 100
            state: active
            query: SELECT * FROM public.jobs
          - pid: 12346
            duration: 100
            state: active
            query: SELECT * FROM public.logs
        - name: idle_in_transaction
          summary: Idle in Transaction
          status: green
          results:
          - pid: 12345
            duration: 100
            query: SELECT * FROM public.jobs
          - pid: 12346
            duration: 100
            query: SELECT * FROM public.logs
        - name: indexes
          status: yellow
          results:
          - reason: Never Used Indexes
            index: idx_users_email
            index_scan_pct: 100
            scans_per_write: 100
            index_size: 10 GB
            table_size: 100 GB
        - name: bloat
          summary: Bloat
          status: green
          results:
          - type: index
            object: public.jobs::id_idx
            bloat: 100
            waste: 100
        - name: hit_rate
          summary: Hit Rate
          status: green
          results:
          - name: public.jobs
            percentage: 98.407
          - name: public.logs
            percentage: 96.34
        - name: blocking_queries
          summary: Blocking Queries
          status: green
          results:
          - blocked_pid: 12345
            blocking_statement: SELECT * FROM public.jobs
            blocking_duration: 100
            blocking_pid: 12346
            blocked_statement: SELECT * FROM public.logs
            blocked_duration: 100
        - name: int4_sequence_usage
          summary: Int4 Sequence Usage
          status: green
          results:
          - col: public.jobs(id)
            seq: public.jobs_id_seq
          - col: public.logs(id)
            seq: public.logs_id_seq
        - name: unlogged_tables
          summary: Unlogged Tables
          status: green
          results:
          - schema: public
            table: users
            owner: uafndf8hhid2kh
          - schema: public
            table: logs
            owner: uafndf8hhid2kh
        - name: table_transaction_id_wraparound
          summary: Table Transaction ID Wraparound
          status: green
          results:
          - schema: public
            table: users
            percentage: 50
        - name: database_transaction_id_wraparound
          summary: Database Transaction ID Wraparound
          status: green
          results:
          - name: databasename
            percentage: 50
        - name: schema_check
          summary: Schema Check
          status: green
          results:
          - count: 4
      description: A comprehensive report containing diagnostic information about
        a PostgreSQL database.
    CreateAddon:
      type: object
      properties:
        callback_url:
          type: string
          format: uri
          description: The URL to receive callbacks for the addon creation process.
        heroku_id:
          type: string
          format: email
          description: The Heroku user ID (email) associated with the addon.
        name:
          type: string
          description: The name to assign to the new addon.
        region:
          type: string
          description: The region where the addon will be hosted.
        uuid:
          type: string
          format: uuid
          description: The unique identifier for the addon.
        oauth_grant:
          type: object
          properties:
            code:
              type: string
              description: The OAuth authorization code.
            expires_at:
              type: string
              description: The expiration timestamp for the OAuth code.
            type:
              type: string
              enum:
              - authorization_code
              description: The type of OAuth grant.
          description: OAuth grant details for authentication.
        logplex_token:
          type: string
          description: The token for logplex logging integration.
        log_input_url:
          type: string
          format: uri
          description: The URL for log input.
      required:
      - callback_url
      - heroku_id
      - name
      - region
      - uuid
      - logplex_token
      - log_input_url
      description: Details required to create a new Heroku PostgreSQL addon.
    CreateAddonResponse:
      type: object
      required:
      - id
      properties:
        id:
          oneOf:
          - type: string
            format: uuid
          - type: integer
          description: The unique identifier of the created addon.
        message:
          type: string
          description: A message describing the result of the creation.
        config:
          type: object
          description: Configuration details for the created addon.
        value:
          type: string
          description: Additional information about the created addon.
      description: Response returned after creating a new Heroku PostgreSQL addon.
    UpdateAddon:
      type: object
      properties:
        plan:
          type: string
          description: The new plan to apply to the addon.
      description: Details required to update an existing Heroku PostgreSQL addon.
    UpdateAddonResponse:
      type: object
      required:
      - message
      properties:
        config:
          type: object
          description: Updated configuration details for the addon.
        message:
          type: string
          description: A message describing the result of the update.
      description: Response returned after updating a Heroku PostgreSQL addon.
    ExpensiveQueriesResponse:
      type: object
      properties:
        queries:
          type: array
          items:
            type: object
            properties:
              query_id:
                type: string
                description: The unique identifier of the query.
              text:
                type: string
                description: The SQL text of the query, truncated to 4,000 characters.
              observations:
                type: array
                items:
                  type: object
                  properties:
                    time:
                      type: string
                      description: The timestamp of the observation.
                    time_spent:
                      type: number
                      description: The total time spent executing the query.
                    calls:
                      type: number
                      description: The number of times the query was called.
                    read_time:
                      type: number
                      description: The time spent reading data.
                    write_time:
                      type: number
                      description: The time spent writing data.
                description: A list of hourly observations for the query.
          description: A list of expensive queries with their performance metrics.
      description: Response containing a list of expensive queries and their performance
        data.
    CredentialsResponse:
      type: object
      required:
      - uuid
      - name
      - state
      - database
      - host
      - port
      - roles
      properties:
        uuid:
          type: string
          format: uuid
          description: The unique identifier of the credential.
        name:
          type: string
          description: The name of the credential.
        state:
          type: string
          enum:
          - active
          - inactive
          description: The current state of the credential (active or inactive).
        database:
          type: string
          description: The name of the database associated with the credential.
        host:
          type: string
          description: The hostname for connecting to the database.
        port:
          type: integer
          description: The port number for connecting to the database.
        roles:
          type: array
          items:
            type: object
            description: Details about the database roles associated with the credential.
            properties:
              user:
                type: string
                description: The database username.
              password:
                type: string
                description: The password for the database user.
              state:
                type: string
                enum:
                - active
                - inactive
                description: The state of the role (active or inactive).
      example:
        uuid: 01234567-89ab-cdef-0123-456789abcdef
        name: credential-name
        state: active
        database: database-name
        host: cluster-name.region.rds.amazonaws.com
        port: 5432
        roles:
        - user: credential-name
          password: password123
          state: active
      description: Details about a database credential, including connection information
        and roles.
    Quotas:
      type: object
      properties:
        items:
          type: array
          items:
            oneOf:
            - $ref: '#/components/schemas/StorageQuota'
          description: A list of quotas applied to the database, such as storage limits.
      description: A collection of quotas for a PostgreSQL database.
    TableLimit:
      description: Represents the limit on the number of tables supported in a database.
      type: object
      properties:
        name:
          type: string
          description: The name of the limit, e.g., "table-limit".
        current:
          type: integer
          description: The current number of tables in use.
        limit:
          type: integer
          description: The maximum number of tables allowed.
      example:
        name: table-limit
        current: 100
        limit: 4000
    StorageQuota:
      type: object
      required:
      - type
      - current_gb
      - warning_gb
      - critical_gb
      - enforcement_action
      - enforcement_active
      properties:
        type:
          type: string
          enum:
          - storage
          description: The type of quota, currently only "storage" is supported.
        current_gb:
          type: number
          format: float
          nullable: true
          description: The current storage usage in gigabytes.
        warning_gb:
          type: integer
          nullable: true
          description: The storage threshold (in GB) at which a warning is triggered.
        critical_gb:
          type: integer
          nullable: true
          description: The storage threshold (in GB) at which critical actions are
            triggered.
        enforcement_action:
          $ref: '#/components/schemas/EnforcementAction'
          description: The action to take when the storage quota is exceeded.
        enforcement_active:
          type: boolean
          description: Indicates whether the enforcement action is currently active.
      example:
        type: storage
        current_gb: 100.0
        warning_gb: 50
        critical_gb: 100
        enforcement_action: notify
        enforcement_active: true
      description: Details about the storage quota settings for a PostgreSQL database.
    EnforcementAction:
      type: string
      enum:
      - restrict
      - notify
      - none
      description: 'The action to take when a quota is exceeded:

        - **restrict**: Revokes CREATE/INSERT privileges and limits connections to
        1, allowing only reads and deletes.

        - **notify**: Sends a notification without restricting operations.

        - **none**: Takes no action, potentially incurring additional costs.'
    Attachment:
      type: object
      properties:
        name:
          type: string
          description: The name of the attachment.
        config:
          type: object
          properties:
            pool:
              type: string
              description: The name of the pool to attach.
            credential:
              type: string
              description: The credential to use for the attachment.
            proxy:
              type: boolean
              description: Indicates if a proxy is used for the attachment.
          description: Configuration details for the attachment.
      description: Details required to create a new attachment for a PostgreSQL addon.
    AttachmentResponse:
      type: object
      properties:
        config:
          type: object
          description: Configuration details for the created attachment.
        name:
          type: string
          description: The name of the created attachment.
      description: Response returned after creating a new attachment for a PostgreSQL
        addon.
host: heroku-data-api-staging.herokuapp.com
