workflow: app_with_db
inputs:
  app_name:
    description: "Name for new app"
    type: string
  region:
    provider: regions:list
    select: { value_field: name, display_field: name }
    default: { value: "us" }
  addon_plan:
    description: "Database plan"
    provider: addons:services:list
    select: { value_field: name, display_field: name }
steps:
  - id: create_app
    run: apps:create
    body:
      name: ${{ inputs.app_name }}
      region: ${{ inputs.region }}

  - id: add_pg
    run: apps:addons:create
    with: { app: ${{ inputs.app_name }} }
    body:
      plan: ${{ inputs.addon_plan }}

