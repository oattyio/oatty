workflow: postgres_promote_primary
title: "Postgres Promote Primary"
description: "Promote a selected Oatty Postgres database attachment to be the primary DATABASE_URL for an app."
inputs:
  app:
    name: "App"
    provider: apps list
    select: { value_field: name, display_field: name }
  database:
    name: "Database"
    description: "Database attachment name to promote (e.g., HEROKU_POSTGRESQL_IVORY_URL)"
    provider: apps addons:list
    depends_on:
      app: ${{ inputs.app }}
    select: { value_field: name, display_field: name }
steps:
  - id: promote
    run: apps pg:promote
    with:
      app: ${{ inputs.app }}
    body:
      database: ${{ inputs.database }}
