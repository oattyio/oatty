workflow: collaborator_lifecycle
description: "Add a collaborator to an app and verify their access and permissions."
inputs:
  app:
    provider: apps list
    select: { value_field: name, display_field: name }
  user:
    description: "Email or user ID"
    type: string
  permissions:
    description: "Permissions for collaborator"
    type: array
    enum: [view, deploy, operate, manage]
steps:
  - id: add_collab
    run: teams apps:collaborators:create
    with:
      app: ${{ inputs.app }}
    body:
      user: ${{ inputs.user }}
      permissions: ${{ inputs.permissions }}
      silent: false

  - id: confirm
    run: teams apps:collaborators:info
    with:
      app: ${{ inputs.app }}
      collaborator: ${{ inputs.user }}

