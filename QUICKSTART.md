# Quick Start Guide

Get up and running with the Oatty CLI (Rust) in 5 minutes.

## Prerequisites

- **Rust** (nightly toolchain) - Install from [rustup.rs](https://rustup.rs/)
- **Oatty API Token** - Obtain from your API provider's dashboard

## Setup (Automated)

Run the setup script:

```bash
bash scripts/dev-setup.sh
```

This will:

- ‚úÖ Verify Rust installation
- ‚úÖ Install required toolchain components
- ‚úÖ Create configuration files
- ‚úÖ Build the project
- ‚úÖ Run tests

## Setup (Manual)

If you prefer manual setup:

```bash
# 1. Clone and navigate
cd /Users/jwilaby/Documents/dev/next-gen-cli

# 2. Create environment file
cp .env.example .env
# Edit .env and add your OATTY_API_TOKEN

# 3. Build
cargo build --workspace

# 4. Test
cargo test --workspace
```

## Running the CLI

### Interactive TUI Mode

Launch the Terminal UI:

```bash
cargo run -p oatty-cli
```

**TUI Controls:**

- Type to search/filter commands
- `‚Üë`/`‚Üì` - Navigate commands
- `Enter` - Select command and fill inputs
- `Tab`/`Shift+Tab` - Cycle through input fields
- `Space` - Toggle boolean flags
- `‚Üê`/`‚Üí` - Cycle enum values
- `Enter` (on inputs) - Execute command
- `Ctrl+Y` - Copy command to clipboard
- `Ctrl+H` - Show help
- `Ctrl+C` - Quit

### CLI Mode

Run commands directly:

```bash
# List all apps
cargo run -p oatty-cli -- apps list

# Get info about an app
cargo run -p oatty-cli -- apps info my-app

# Create a new app
cargo run -p oatty-cli -- apps create --name demo-app

# List releases
cargo run -p oatty-cli -- releases list my-app
```

## Development Workflow

### Using Make (Recommended)

```bash
# Show all available commands
make help

# Build the project
make build

# Run tests
make test

# Format and lint
make fmt
make clippy

# Run pre-commit checks (format + lint + test)
make pre-commit

# Launch TUI
make run-tui

# Run CLI command
make run-cli ARGS="apps list"
```

### Using Cargo Directly

```bash
# Build all crates
cargo build --workspace

# Run tests
cargo test --workspace

# Run clippy (linter)
cargo clippy --workspace -- -D warnings

# Format code
cargo fmt --all

# Build optimized release binary
cargo build --release -p oatty-cli
# Binary will be at: target/release/oatty
```

### Using VS Code / Cursor

1. **Open the project** in VS Code/Cursor
2. **Install recommended extensions** (Command Palette ‚Üí "Extensions: Show Recommended Extensions")
3. **Start debugging**: Press `F5` or go to Run ‚Üí Start Debugging
4. **Run tasks**: `Cmd+Shift+P` ‚Üí "Tasks: Run Task"
5. **Build**: `Cmd+Shift+B`

## Common Tasks

### Change Log Level

```bash
# Debug logging
OATTY_LOG=debug cargo run -p oatty-cli

# Trace logging (very verbose)
OATTY_LOG=trace cargo run -p oatty-cli
```

### Change Theme

```bash
# Use Nord theme
TUI_THEME=nord cargo run -p oatty-cli

# Use high-contrast Dracula
TUI_THEME=dracula_hc cargo run -p oatty-cli
```

### Generate Command Manifest

The manifest is generated by the registry build script from OpenAPI documents:

```bash
cargo build -p oatty-registry
```

### Watch Mode (Auto-rebuild)

Install `cargo-watch`:

```bash
cargo install cargo-watch
```

Then run:

```bash
# Auto-rebuild on changes
cargo watch -x "build --workspace"

# Auto-run tests on changes
cargo watch -x "test --workspace"

# Or use make
make test-watch
```

## Project Structure

```
next-gen-cli/
‚îú‚îÄ‚îÄ crates/
‚îÇ   ‚îú‚îÄ‚îÄ cli/        # Main CLI binary
‚îÇ   ‚îú‚îÄ‚îÄ tui/        # Terminal UI (Ratatui)
‚îÇ   ‚îú‚îÄ‚îÄ registry/   # Command registry
‚îÇ   ‚îú‚îÄ‚îÄ engine/     # Workflow execution
‚îÇ   ‚îú‚îÄ‚îÄ api/        # API client
‚îÇ   ‚îú‚îÄ‚îÄ mcp/        # Plugin system
‚îÇ   ‚îî‚îÄ‚îÄ util/       # Utilities
‚îú‚îÄ‚îÄ schemas/        # API schemas
‚îú‚îÄ‚îÄ workflows/      # Workflow definitions
‚îî‚îÄ‚îÄ .vscode/        # VS Code config
```

## Environment Variables

Create a `.env` file (see `.env.example`):

```bash
# Required
OATTY_API_TOKEN=your-api-key-here

# Optional
OATTY_LOG=debug              # Log level
TUI_THEME=dracula             # Theme
DEBUG=1                       # Debug mode
RUST_BACKTRACE=1              # Show backtraces
```

## Debugging

### Command Line

```bash
# Run with backtrace
RUST_BACKTRACE=1 cargo run -p oatty-cli -- apps list

# Full backtrace
RUST_BACKTRACE=full cargo run -p oatty-cli
```

### VS Code / Cursor

1. Set breakpoints by clicking in the gutter
2. Press `F5` to start debugging
3. Choose a debug configuration:
   - **Debug CLI - TUI Mode** - Debug the TUI
   - **Debug CLI - Apps List** - Debug a specific command
   - **Debug CLI - Custom Command** - Debug with any args

## Testing

```bash
# Run all tests
cargo test --workspace

# Run tests for specific crate
cargo test -p oatty-cli

# Run a specific test
cargo test test_name -- --exact

# Show test output
cargo test -- --nocapture
```

## Code Quality

Before committing:

```bash
# Format code
cargo fmt --all

# Run linter
cargo clippy --workspace -- -D warnings

# Run tests
cargo test --workspace

# Or run all at once
make pre-commit
```

## Getting Help

- **Full Guide**: See [DEVELOPMENT.md](./DEVELOPMENT.md)
- **Architecture**: See [ARCHITECTURE.md](./ARCHITECTURE.md)
- **Contributing**: See [CONTRIBUTING.md](./CONTRIBUTING.md)
- **Features**: See [README.md](./README.md)
- **VS Code Setup**: See [.vscode/README.md](.vscode/README.md)

## Troubleshooting

### "Oatty API authentication failed"

‚Üí Set `OATTY_API_TOKEN` in `.env` or environment

### TUI not rendering correctly

‚Üí Ensure your terminal supports 256 colors and UTF-8

### Build errors

‚Üí Make sure you're using Rust nightly: `rustup show`

### Slow compilation

‚Üí Use `cargo check` for faster feedback without code generation

### Keychain prompts (macOS)

‚Üí See "Code Signing" section in [README.md](./README.md)

## Next Steps

1. ‚úÖ **Read the docs**: [DEVELOPMENT.md](./DEVELOPMENT.md) has comprehensive info
2. ‚úÖ **Explore the code**: Start with `crates/cli/src/main.rs`
3. ‚úÖ **Try the TUI**: `cargo run -p oatty-cli`
4. ‚úÖ **Run some commands**: `cargo run -p oatty-cli -- apps list`
5. ‚úÖ **Set up your editor**: Install VS Code extensions
6. ‚úÖ **Pick a task**: Check issues or roadmap

Happy coding! ü¶Ä
